{"version":3,"sources":["../modules/shared.js"],"names":["reduce","createValueGenerator","createCircularTicks","getAxisStyles","createUniqueID","calculateMargin","textDomainRange","calculateExtent","calculateDomainRange","createDomainRangeGenerator","defaultColors","defaultStyles","stroke","strokeWidth","opacity","fontFamily","fontSize","textAnchor","fill","transition","r","cy","font","display","args","rVal","i","length","scale","type","parseDate","dataIndex","d","containerElement","select","selectAll","remove","ticks","circleAppender","append","attr","each","grid","verticalGrid","yAxisOrientRight","cx","o","axes","margin","y2","top","right","bottom","left","s","a","forEach","v","includes","splice","data","accessor","lo","hi","item","LO","HI","timeDomainRange","domainRange","Array","isArray","axis","domain","range","padding"],"mappings":"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","file":"shared.js","sourcesContent":["import { extent } from 'd3-array';\nimport { scaleLinear as linear, scalePoint as point } from 'd3-scale';\nimport { scaleTime, select } from 'd3';\nimport hash from 'object-hash';\n\nexport const defaultColors = [\n  '#3F4C55',\n  '#E3A51A',\n  '#F4E956',\n  '#AAAC84'\n];\n\nexport const defaultStyles = {\n  '.pie-chart-slice': {\n    stroke: '#fff',\n    strokeWidth: 1,\n    opacity: '1'\n  },\n  '.pie-chart-slice:hover': {\n    opacity: '0.8'\n  },\n  '.pie-chart-label': {\n    fontFamily: 'sans-serif',\n    fontSize: '12px',\n    textAnchor: 'middle',\n    fill: '#000'\n  },\n  '.bar': {\n    fill: 'blue',\n    transition: 'x 0.35s ease-in, y 0.35s ease-in, height 0.5s ease-in, width 0.5s ease-in',\n    opacity: 1\n  },\n  '.bar:hover': {\n    opacity: 0.8\n  },\n  '.line': {\n    fill: 'none',\n    strokeWidth: 1.5,\n    opacity: 0.7\n  },\n  '.line:hover': {\n    opacity: 1\n  },\n  '.area': {\n    opacity: 0.7\n  },\n  '.area:hover': {\n    opacity: 1\n  },\n  '.dot': {\n    strokeWidth: 0,\n    opacity: 0.85,\n    transition: 'cx 0.35s ease-in, cy 0.35s ease-in, r 0.5s ease-in'\n  },\n  '.dot:hover': {\n    opacity: 1\n  },\n  'circle.data-point': {\n    r: 4,\n    opacity: 0.7,\n    transition: 'cx 0.35s ease-in, cy 0.35s ease-in'\n  },\n  'circle.data-point:hover': {\n    r: 6,\n    opacity: 1\n  },\n  'circle.tick-circle': {\n    r: 2,\n    fill: 'lightgrey'\n  },\n  '.x circle.tick-circle': {\n    cy: '8px'\n  },\n  '.axis': {\n    'font-family': 'dobra-light,Arial,sans-serif',\n    'font-size': '9px'\n  },\n  '.axis .label': {\n    font: '14px arial'\n  },\n  '.axis path, .axis line': {\n    fill: 'none',\n    strokeWidth: 1,\n    'shape-rendering': 'crispEdges'\n  },\n  'x.axis path': {\n    display: 'none',\n    stroke: 'lightgrey'\n  },\n  '.tick line': {\n    stroke: 'lightgrey',\n    strokeWidth: 1,\n    opacity: '0.7'\n  }\n};\n\nexport function reduce(...args) {\n  let rVal = args[0];\n  for (let i = 1; i < args.length; i++) {\n    rVal -= args[i];\n  }\n  return rVal;\n}\n\nexport function createValueGenerator(scale, type, parseDate) {\n  const dataIndex =\n    (scale === 'x')\n      ? 'x'\n      : 'y';\n  return (type === 'time')\n    ? (d) => parseDate(d[dataIndex])\n    : (d) => d[dataIndex];\n}\n\nexport function createCircularTicks(containerElement) {\n  select(containerElement)\n    .select('svg')\n    .selectAll('.tick-circle')\n    .remove();\n\n  const ticks = select(containerElement)\n    .select('svg')\n    .selectAll('.tick');\n\n  function circleAppender() {\n    select(this)\n      .append('circle')\n      .attr('class', 'tick-circle');\n  }\n  ticks.each(circleAppender);\n}\n\nexport function getAxisStyles(grid, verticalGrid, yAxisOrientRight) {\n  return {\n    '.x circle.tick-circle ': {\n      fill:\n        (verticalGrid)\n          ? 'none'\n          : 'lightgrey'\n    },\n    '.y circle.tick-circle': {\n      cx:\n        (yAxisOrientRight)\n          ? '+5px'\n          : '-8px',\n      fill:\n        (grid)\n          ? 'none'\n          : 'lightgrey'\n    },\n    '.y.axis line': {\n      display:\n        (grid)\n          ? 'inline'\n          : 'none',\n      stroke: 'lightgrey'\n    }\n  };\n}\n\nexport function createUniqueID(o) {\n  return hash(o);\n}\n\nexport function calculateMargin(axes, margin, yAxisOrientRight, y2) {\n  if (margin) return margin;\n  if (yAxisOrientRight) {\n    return (axes)\n      ? { top: 20, right: 50, bottom: 50, left: (y2) ? 50 : 20 }\n      : { top: 0, right: 0, bottom: 0, left: 0 };\n  }\n  return (axes)\n    ? { top: 20, right: (y2) ? 50 : 20, bottom: 50, left: 50 }\n    : { top: 0, right: 0, bottom: 0, left: 0 };\n}\n\n/* eslint no-shadow: 0 */\nexport function textDomainRange(d, s) {\n  const a = [];\n\n  d.forEach((d) => {\n    d.forEach((d, i) => {\n      const v = d[s];\n      if (!a.includes(v)) a.splice(i, 0, v);\n    });\n  });\n\n  return a;\n}\n\nexport function calculateExtent(data, accessor) {\n  let lo; // Low\n  let hi; // High\n  data.forEach((item) => {\n    const [LO, HI] = extent(item, accessor);\n    lo = lo < LO ? lo : LO;\n    hi = hi > HI ? hi : HI;\n  });\n  return [lo, hi];\n}\n\nfunction timeDomainRange(domainRange, parseDate) {\n  const [LO, HI] = domainRange;\n  const lo = parseDate(LO);\n  const hi = parseDate(HI);\n  return [lo, hi];\n}\n\nexport function calculateDomainRange(domainRange, type, parseDate) {\n  if (!Array.isArray(domainRange)) return null;\n  return (type === 'time')\n    ? timeDomainRange(domainRange, parseDate)\n    : domainRange;\n}\n\nexport function createDomainRangeGenerator(scale, domainRange, data, type, length, parseDate) {\n  /*\n  const dataIndex =\n    (scale === 'x')\n      ? 'x'\n      : 'y';\n  */\n  let axis;\n\n  switch (type) {\n    case 'text':\n      axis = point();\n      axis\n        .domain(\n          Array.isArray(domainRange)\n            ? domainRange // calculateDomainRange(domainRange, type, parseDate)\n            : textDomainRange(data, scale))\n          .range([0, length])\n          .padding(0);\n      break;\n    case 'linear':\n      axis = linear();\n      axis\n        .domain(\n          Array.isArray(domainRange)\n            ? domainRange // calculateDomainRange(domainRange, type, parseDate)\n            : calculateExtent(data, createValueGenerator(scale, type, parseDate)))\n        .range(\n          (scale === 'x')\n            ? [0, length]\n            : [length, 0]);\n      break;\n    case 'time':\n      axis = scaleTime();\n      axis\n        .domain(\n          Array.isArray(domainRange)\n            ? timeDomainRange(domainRange, parseDate)\n            : calculateExtent(data, createValueGenerator(scale, type, parseDate)))\n        .range(\n          (scale === 'x')\n            ? [0, length]\n            : [length, 0]);\n      break;\n    default:\n      break;\n  }\n  return axis;\n}\n"]}